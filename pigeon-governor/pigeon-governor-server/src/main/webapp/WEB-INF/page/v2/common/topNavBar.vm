#set($layout="layoutblank.vm")
<style>
    .nav-hover{
        background-color: rgba(0,0,0,.1)!important;
        color: #fff!important;
    }
    .navbar-form input[type=text]{
        font-size: 15px;
        width:300px !important;
    }
    .navbar-form.form-search {
        margin-top: 7px;
        margin-bottom: 0;
    }
    .btn-group-xs>.btn, .btn-xs{
        padding: 3px 6px 2px 6px;
    }
</style>
<div id="navbar" class="navbar navbar-default    navbar-collapse       h-navbar  navbar-fixed-top">
    <script type="text/javascript">
        try{ace.settings.check('navbar' , 'fixed')}catch(e){}
    </script>

    <div class="navbar-container" id="navbar-container">
        <div class="navbar-header pull-left">
            <!-- #section:basics/navbar.layout.brand -->
            <a href="#" class="navbar-brand">
                <small>
                    <i class="fa fa-leaf"></i>
                    Pigeon
                </small>
            </a>

            <!-- /section:basics/navbar.layout.brand -->

            <!-- #section:basics/navbar.toggle -->
            <button class="pull-right navbar-toggle navbar-toggle-img collapsed" type="button" data-toggle="collapse" data-target=".navbar-buttons,.navbar-menu">
                <span class="sr-only">Toggle user menu</span>

            </button>

##            <button class="pull-right navb'ar-toggle collapsed" type="button" data-toggle="collapse" data-target=".sidebar">
##                <span class="sr-only">Toggle sidebar</span>
##
##                <span class="icon-bar"></span>
##
##                <span class="icon-bar"></span>
##
##                <span class="icon-bar"></span>
##            </button>

            <!-- /section:basics/navbar.toggle -->
        </div>

        <!-- #section:basics/navbar.dropdown -->
        <div class="navbar-buttons navbar-header pull-right  collapse navbar-collapse" role="navigation">
            <ul class="nav ace-nav">
                <!-- #section:basics/navbar.user_menu -->
                <li class="light-blue">
                    <a data-toggle="dropdown" href="#" class="dropdown-toggle">
                        <i class="ace-icon glyphicon glyphicon-user smaller-50"></i>
                        #if($userName)$userName#end
                        <i class="ace-icon fa fa-caret-down"></i>
                    </a>
                    <ul class="user-menu dropdown-menu-right dropdown-menu dropdown-yellow dropdown-caret dropdown-close">
                        <li>
                            <a href="/account/profile">
                                <i class="ace-icon fa fa-file smaller-50"></i>
                                个人信息
                            </a>
                        </li>
                        <li>
                            <a href="/ssologout">
                                <i class="ace-icon glyphicon glyphicon-off smaller-50"></i>
                                注销
                            </a>
                        </li>
                    </ul>
                </li>
                <!-- /section:basics/navbar.user_menu -->
            </ul>
        </div>

        <!-- /section:basics/navbar.dropdown -->
        <nav role="navigation" class="navbar-menu pull-left collapse navbar-collapse">
            <!-- #section:basics/navbar.nav -->
            <ul class="nav navbar-nav">
                <li id="tree-nav">
                    <a  href="/shs/topmenu">
                        应用树
                    </a>
                </li>
                <li id="doc-nav">
                    <a  href="/doc">
                        文档中心
                    </a>
                </li>
                <li id="log-nav">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        日志中心&nbsp;
                        <i class="ace-icon fa fa-angle-down bigger-110"></i>
                    </a>

                    <ul class="dropdown-menu dropdown-light-blue dropdown-caret">
                        <li>
                            <a href="/oplog">
                                <i class="ace-icon fa fa-eye bigger-110 blue"></i>
                                操作日志
                        </li>

                        <li>
                            <a href="/event">
                                <i class="ace-icon fa fa-user bigger-110 blue"></i>
                                告警日志
                            </a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="">
                        使用帮助
                    </a>
                </li>
                <li id="feedback-nav">
                    <a href="/feedback">
                        意见反馈
                    </a>
                </li>
            </ul>
##            <form class="navbar-form navbar-left form-search" role="search">
##                <div class="form-group">
##                    <input id="main-search" type="text" placeholder="搜索 应用名/服务名">
##                </div>
##
##                <button id="search-button" type="button" class="btn btn-xs btn-info2">
##                    <i class="ace-icon fa fa-search icon-only bigger-110"></i>
##                </button>
##            </form>
            <form class="navbar-form navbar-left form-search" id="form-beer_v1" name="form-beer_v1" style="width: 600px">
                <div class="form-group">
                    <div class="typeahead__container">
                        <div class="typeahead__field">

            <span class="typeahead__query">
                <input class="js-typeahead-beer_v1" name="beer_v1[query]" type="search" placeholder="Search" autocomplete="off">
            </span>
            <span class="typeahead__button">
                <button type="submit">
                    <i class="typeahead__search-icon"></i>
                </button>
            </span>

                        </div>
                    </div>
                </div>
            </form>


            <form id="form-beer_v1" name="form-beer_v1" style="width: 200px;">

            </form>
        </nav>
    </div><!-- /.navbar-container -->
</div>

<script>
    jQuery(function($) {
        $.typeahead({
            input: '.js-typeahead-beer_v1',
            minLength: 1,
            maxItem: 15,
            order: "asc",
            hint: true,
            group: {
                template: "{{group}}"
            },
            maxItemPerGroup: 5,
            backdrop: {
                "background-color": "#fff"
            },
            href: function (item) {
                if(item.group=="project")
                    return "/";
                else return "/";
            },
//            href: "/beers/{{group|slugify}}/{{display|slugify}}/",
            dropdownFilter: "All",
            emptyTemplate: 'No result for "{{query}}"',
            display: "name",
            template: "<span>{{name}}</span>",
            source: {
                project: {
                    display:["name"],
                    template: "<div style='width: 100%'><span>{{name}}</span></div><div style='width:100%'><small>产品线:{{product}}&nbsp部门:{{bu}}</small></div>",
                    ajax: {
                        method: "GET",
                        url: "/project/list.json"
                    }
//                    data: [
//                        {
//                            name: "Breaking Bad",
//                            bu: 9.6,
//                            product:"test"
//                        }
//                    ]

//                    ajax: {
//                        url: "/jquerytypeahead/country_v2.json",
//                        path: "data.country"
//                    }
                },
                service: {
                    display: ["name"],
                    template: function (query, item) {
                        var template;
                        if(item.prefix!=""){
                            return "<div style='width:100%'>{{displayName}}</div>"+
                                            "<div style='width: 100%'><small>所属应用:{{projectName}}</small></div>";
                        }else
                            return "<div style='width:100%'>{{name}}</div>"+
                                    "<div style='width: 100%'><small>所属应用:{{projectName}}</small></div> ";

                    },
                    ajax:{
                        method:"GET",
                        url:"/service/list.json"
                    }
                }
//                host:{
//                    display:["name"],
//                    template:"",
//                    data:[
//                        {
//                            name:"192.168.01.1"
//                        }
//                    ]
//                }
            },
//            callback: {
//                onClickAfter: function (node, a, item, event) {
//
//                    event.preventDefault;
//
//                    // href key gets added inside item from options.href configuration
//                    alert(item.href);
//
//                }
//            },
            debug: true
        });
    });
</script>