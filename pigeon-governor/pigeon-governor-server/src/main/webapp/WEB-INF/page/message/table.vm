#set($layout="layoutblank.vm")
<div class="widget-box transparent">
    <div class="widget-header widget-header-flat">
        <h4 class="widget-title lighter">
            <i class="ace-icon fa fa-star orange"></i>
        </h4>
        <div class="widget-toolbar">
            <span class="label label-success">
                Filter $container.getRecordsFiltered()/$container.getTotalCount()
            </span>
        </div>
    </div>
    <div class="widget-body">
        <div class="widget-main no-padding">
            <div id="table-holder">
                <table id="content" class="table table-striped table-bordered table-hover value-size">
                    <thead>
                    <tr>
                        <th>告警ID</th>
                        <th>告警类型</th>
                        <th>级别</th>
                        <th>标题</th>
                        <th>项目名</th>
                        <th>关联项目名</th>
                        <th>概要</th>
                        <th>发送详情</th>
                        <th>时间</th>
                    </tr>
                    </thead>
                    <tbody>

                        #foreach ($data in $container.getData())
                        <tr>
                            <td data-order="$data.getEventId()" data-search="$data.getEventId()">
                                <a href="/message/$data.getEventId()">$data.getEventId()</a>
                            </td>
                            <td data-order="$data.getType()" data-search="$data.getType()">
                                #if($data.getType()=="ClientSkew")
                                    <span class="label label-sm label-primary arrowed arrowed-right">
                                        $data.getType()
                </span>
                                #else
                                    <span class="label label-sm arrowed arrowed-right">
                                        $data.getType()
                </span>
                                #end
                            </td>
                            <td data-order="$data.getLevel()" data-search="$data.getLevel()">
                                #if($data.getLevel()=="常规")
                                    <span class="badge badge-success">
                    常规
                </span>
                                #else
                                    <span class="badge badge-warning">
                    重要
                </span>
                                #end
                            </td>
                            <td>
                                $data.getTitle()
                            </td>
                            <td data-order="$data.getProjectName()" data-search="$data.getProjectName()">
                                <a href="/services/$data.getProjectName()">$data.getProjectName()</a>
                            </td>
                            <td data-order="$data.getRelatedProjectName()" data-search="$data.getRelatedProjectName()">
                                #if($data.getRelatedProjectName()=='-')
                                    -
                                #else
                                    <a href="/services/$data.getRelatedProjectName">$data.getRelatedProjectName()</a>
                                #end
                            </td>
                            <td data-order="$data.getSummary()" data-search="$data.getSummary()">
                                $data.getSummary()
                            </td>
                            <td data-order="$data.getSendResult()" data-search="$data.getSendResult()">
                                #if($data.getSendResult()=="全部成功")
                                    <button class="btn btn-minier disabled btn-success">全部成功</button>
                                #elseif($data.getSendResult()=="部分失效")
                                    <button class="btn btn-minier disabled btn-warning">部分失效</button>
                                #else
                                    <button class="btn btn-minier disabled btn-danger">全部失效</button>
                                #end
                            </td>
                            <td data-order="$data.getTime()" data-search="$data.getTime()">
                                $data.getTime()
                            </td>
                        </tr>
                        #end
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<script>
    jQuery(function($) {
        $('#content').DataTable({
            bAutoWidth: false,
//            aoColumns: [
//                null,
//                null,
//                null,
//                null,
//                null,
//                null,
//                null,
//                null,
//                null
//            ],
//            aaSorting: [],
            dom: "<'myRow'<'col-xs-8'><'col-xs-4'B>>" +
            "<'row aceTableRow'<'col-xs-3'l><'col-xs-9'fr>>" +
            "t" +
            "<'row'<'col-xs-3'i><'col-xs-9'p>>"
        });
    });
//        $.ajax({
//            type: "post",
//            url: "/message/data",
//            dataType: "json",
//            success: function (data) {
//                dataFormat(data);
//            }
//        });
//
//
//        $('table').DataTable({
////            "processing": true,
////            "serverSide": true,
//            "ajax": {
//                "url": "/message/data",
//                "type": "POST"
//            },
//            "columns": [
//                {data: "eventId", title: "事件ID",width: "7%"},
//                {data:"type",title:"事件类型",width:"8%"},
//                {data:"level",title:"级别",width:"5%"},
//                {data:"title",title:"标题",width:"12%"},
//                {data:"projectName",title:"项目名",width:"15%"},
//                {data:"relatedProjectName",title:"关联项目名",width:"15%"},
//                {data:"summary",title:"概要",width:"15%"},
//                {data:"sendResult",title:"发送详情",width:"7%"},
//                {data: "time", title: "时间",width:"12%"}
//            ],
//            bAutoWidth: false,
//            dom:"<'myRow'<'col-xs-8'><'col-xs-4'B>>"+
//            "<'row aceTableRow'<'col-xs-3'l><'col-xs-9'fr>>"+
//            "t"+
//            "<'row'<'col-xs-3'i><'col-xs-9'p>>"
//        });
//    });
//    function dataFormat(datas){
//        var list = datas.data;
//        for(var i = 0;i<list.length;i++){
//            var data = list[i];
//            var eventId = data.eventId;
//            var type = data.type;
//            var level = data.level;
//            var proje ctName = data.projectName;
//            var relatedProjectName = data.relatedProjectName;
//        }
//    }
</script>