#set($layout="layoutblank.vm")
<!DOCTYPE html>
<html>
<head>

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta charset="utf-8" />
    <title>Pigeon</title>

    <meta name="description" content="pigeon config"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />

    <!-- bootstrap & fontawesome -->
    <link rel="stylesheet" href="${rc.contextPath}/resources/assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="${rc.contextPath}/resources/assets/css/font-awesome.min.css" />

    <!-- page specific plugin styles -->
    <link rel="stylesheet" href="${rc.contextPath}/resources/assets/css/jquery-ui.min.css" />
    <link rel="stylesheet" href="${rc.contextPath}/resources/assets/css/datepicker.css" />

    <!-- text fonts -->
    <link rel="stylesheet" href="${rc.contextPath}/resources/assets/css/ace-fonts.css" />

    <!-- ace styles -->
    <link rel="stylesheet" href="${rc.contextPath}/resources/assets/css/ace.min.css" id="main-ace-style" />

    <!--[if lte IE 9]>
    <link rel="stylesheet" href="${rc.contextPath}/resources/assets/css/ace-part2.min.css" />
    <![endif]-->
    <link rel="stylesheet" href="${rc.contextPath}/resources/assets/css/ace-skins.min.css" />
    <link rel="stylesheet" href="${rc.contextPath}/resources/assets/css/ace-rtl.min.css" />

    <!--[if lte IE 9]>
    <link rel="stylesheet" href="${rc.contextPath}/resources/assets/css/ace-ie.min.css" />
    <![endif]-->

    <!-- inline styles related to this page -->
    <link href="${rc.contextPath}/resources/style/bootstrap-switch.min.css" rel="stylesheet">
    <style type="text/css">

        .vertical-center{
            float: none !important;
        }

    </style>

    <!-- ace settings handler -->
    <script src="${rc.contextPath}/resources/assets/js/ace-extra.min.js"></script>

</head>
<body class="no-skin">

<!-- #section:basics/navbar.layout -->
<div id="navbar" class="navbar navbar-default">
    #parse("common/navbar.vm")
</div>
<div class="main-container" id="main-container">

    <script type="text/javascript">
        try{ace.settings.check('main-container' , 'fixed')}catch(e){}
    </script>
    <!-- #section:basics/sidebar -->
    <div id="sidebar" class="sidebar   responsive">
        #parse("common/sidebar.vm")
    </div>
    <div class="main-content">
        <div class="breadcrumbs" id="breadcrumbs">
            <script type="text/javascript">
                try{ace.settings.check('breadcrumbs' , 'fixed')}catch(e){}
            </script>
            <div class="col-xs-3">
                <ul class="breadcrumb">
                    <li>
                        <i class="ace-icon fa fa-home home-icon"></i>
                        <a href="#">主页</a>
                    </li>

                    <li>
                        <a href="#">服务治理</a>
                    </li>
                    <li class="active">分组路由</li>
                </ul><!-- /.breadcrumb -->
            </div>
            <div class="col-xs-4">
            </div>

                <div class="input-group col-xs-6 pull-right">
                        <input id="searchInput" placeholder="应用名搜索" type="text" class="form-control vertical-center" name="message"
                               data-provide="typeahead" oldautocomplete="off" autocomplete="off" />

                        <span class="input-group-btn">
                            <button  id = "search" class="btn btn-sm btn-info no-radius" type="button">
                                <i class="ace-icon fa fa-search"></i>
                                查询
                            </button>
                        </span>
                </div>


           <!-- <div class="nav-search" id="nav-search">
                <!--<form class="form-search">
                    <span class="input-icon">
                        <input type="text" placeholder="应用名搜索" id="search-input" class="autoFillInput"
                               data-provide="typeahead" oldautocomplete="off" autocomplete="off" />
                        <i class="ace-icon fa fa-search nav-search-icon "></i>
                    </span>
                </form>-->
           <!-- </div>-->
        </div>
        <div class="page-content">
            <div class="page-content-area">
                <h4 class="blue">多region环境路由支持</h4>
                <p>自15年10月新美大合并以来，新公司的业务整合迅速。</p>
                <p>为更好的支持北京侧和上海侧的业务互通需求，架构组件对异地机房，多网络的支持与改进也在持续开发与完善中。</p>
                <p>pigeon的2.7.8-SNAPSHOT版本目前可以提供多region路由支持的测试版本。</p>
                <h4 class="blue">配置简介</h4>
                <p>多region的开关控制由pigeon的配置项pigeon.regions.route.enable来控制，当前线上默认开关为true。此配置项支持动态开关。</p>
                <p>测试阶段，线下全局开关默认为关闭，可在应用级别开启自动切换region的开关。</p>
                <p>如`app.name=xxx`的应用，可以配置xxx.pigeon.regions.route.enable为true。</p>
                <h4 class="blue">Web端控制</h4>
                <p>Pigeon Web可以查看多Region路由状态.在<span class="red">左上角搜索</span>对应应用,进入应用管理界面.</p>
                <p>左上角的开关按钮,可以使得应用的所有者动态调整多Region路由是否开启.无需手动配置.</p>
                <p class="red">后续Pigeon Web将提供更多Region路由的管理功能.</p>
            </div>
        </div>
    </div>
    <div class="footer">
        #parse("common/sub-footer.vm")
    </div>

    <a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
        <i class="ace-icon fa fa-angle-double-up icon-only bigger-110"></i>
    </a>
</div>






<!-- basic scripts -->

<!--[if !IE]> -->
<script type="text/javascript">
    window.jQuery || document.write("<script src='${rc.contextPath}/resources/assets/js/jquery.min.js'>"+"<"+"/script>");
</script>

<!-- <![endif]-->

<!--[if IE]>
<script type="text/javascript">
    window.jQuery || document.write("<script src='${rc.contextPath}/resources/assets/js/jquery1x.min.js'>"+"<"+"/script>");
</script>
<![endif]-->
<script type="text/javascript">
    if('ontouchstart' in document.documentElement)
        document.write("<script src='${rc.contextPath}/resources/assets/js/jquery.mobile.custom.min.js'>"+"<"+"/script>");
</script>
<script src="${rc.contextPath}/resources/assets/js/bootstrap.min.js"></script>
<script src="${rc.contextPath}/resources/assets/js/date-time/bootstrap-datepicker.min.js"></script>
<!-- page specific plugin scripts -->

<script src="${rc.contextPath}/resources/js/bootstrap-switch.min.js"></script>
<script src="${rc.contextPath}/resources/js/bootstrap-typeahead.js"></script>
<script src="${rc.contextPath}/resources/assets/js/bootbox.min.js"></script>
<script>

    var projects = ${projects};
    jQuery(function($) {
        $('li[id="projects_index"]').addClass("active open");
        $('li[id="region_router"]').addClass("active");
        $('#searchInput').typeahead({
            source: projects
        });
        $('#search').click(function () {
            $.ajax({
                type:"post",
                url:"/region/projectRegionRouter",
                data:{"projectName":$('#searchInput').val()},
                dataType:"html",
                async:true,
                success:function(data){
                    $('.page-content-area').html("");
                    $('.page-content-area').append(data);
                }
            });
        });
    });
</script>
<!-- ace scripts -->
<script src="${rc.contextPath}/resources/assets/js/ace-elements.min.js"></script>
<script src="${rc.contextPath}/resources/assets/js/ace.min.js"></script>

</body>
</html>